# Игровая площадка для встраиваний

[`embeddings_playground.py`](embeddings_playground.py) - это одностраничное приложение streamlit для экспериментов с встраиваниями OpenAI.

## Установка

Перед запуском установите необходимые зависимости с помощью:

`pip install -r apps/embeddings-playground/requirements.txt`

(Возможно, вам придется изменить путь, чтобы он соответствовал вашему локальному пути.)

Проверьте установку streamlit с помощью `streamlit hello`.

## Использование

Запустите скрипт с помощью:

`streamlit run apps/embeddings-playground/embeddings_playground.py`

(Опять же, вам может потребоваться изменить путь, чтобы он соответствовал вашему локальному пути.)

В приложении сначала выберите:
- метрику расстояния (мы рекомендуем косинусное)
- модель встраивания (мы рекомендуем `text-embedding-ada-002` для большинства случаев использования, по состоянию на май 2023 года)

Затем введите переменное количество строк для сравнения. Нажмите `ранжировать`, чтобы увидеть:
- ранжированный список строк, отсортированный по расстоянию от первой строки
- тепловую карту, показывающую расстояние между каждой парой строк

## Пример

Вот пример матрицы расстояний для 8 примеров строк, связанных с `Небо голубое`:

![пример матрицы расстояний](example_distance_matrix.png)

Из этих пар расстояний вы можете увидеть:
- встраивания измеряют тематическое сходство больше, чем логическое сходство (например, `Небо голубое` очень близко к `Небо не голубое`)
- пунктуация влияет на встраивания (например, `"НЕБО. ГОЛУБОЕ!"` только третье по близости к `Небо голубое`)
- пары внутри одного языка сильнее, чем пары между языками (например, `El cielo es azul` ближе к `El cielo es rojo`, чем к `Небо голубое`)

Экспериментируйте со своими собственными строками, чтобы узнать, что вы можете выяснить.
